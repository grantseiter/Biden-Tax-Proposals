// ===========================================================#
// Title: "IRADC_credit-cfn"
// File_Author: "Grant M. Seiter -- American Enterprise Institute"
// Date: "September 2020"
// Notes: "Refundable retirement savings credit"
          "calcfunc lines 1378-1391 and  1743-1755"
          "calculator line 21"
// ===========================================================#

// calcfunctions.py

@iterate_jit(nopython=True)
def IRADCTaxCredit(e03150, e03300, IRADC_credit_c, IRADC_credit_rt, iradctc):
    """
    Computes refundable retirement savings tax credit amount.
    """
    # calculate refundable credit amount
    tot_retirement_contributions = e03150 + e03300
    if IRADC_credit_rt > 0.:
        iradctc = min(tot_retirement_contributions * IRADC_credit_rt, IRADC_credit_c)
    else:
        iradctc = 0.
    return (iradctc)


@iterate_jit(nopython=True)
def IITAX(c59660, c11070, c10960, personal_refundable_credit, ctc_new, rptc,
          c09200, payrolltax,
          eitc, refund, iitax, combined, iradctc):
    """
    Computes final taxes.
    """
    eitc = c59660
    refund = (eitc + c11070 + c10960 +
              personal_refundable_credit + ctc_new + rptc + iradctc)
    iitax = c09200 - refund
    combined = iitax + payrolltax
    return (eitc, refund, iitax, combined)

// calculator.py

from taxcalc.calcfunctions import (TaxInc, SchXYZTax, GainsTax, AGIsurtax,
                                   NetInvIncTax, AMT, EI_PayrollTax, Adj,
                                   DependentCare, ALD_InvInc_ec_base, CapGains,
                                   SSBenefits, UBI, AGI, ItemDedCap, ItemDed,
                                   StdDed, AdditionalMedicareTax, F2441, EITC,
                                   RefundablePayrollTaxCredit,
                                   ChildDepTaxCredit, AdditionalCTC, CTC_new,
                                   PersonalTaxCredit, IRADCTaxCredit, SchR,
                                   AmOppCreditParts, EducationTaxCredit,
                                   CharityCredit,
                                   NonrefundableCredits, C1040, IITAX,
                                   BenefitSurtax, BenefitLimitation,
                                   FairShareTax, LumpSumTax, BenefitPrograms,
                                   ExpandIncome, AfterTaxIncome)
